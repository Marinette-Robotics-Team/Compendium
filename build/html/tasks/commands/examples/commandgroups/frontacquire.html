

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Acquire gear from the front &mdash; Team 6624&#39;s Software Guide 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../../search.html"/>
    <link rel="top" title="Team 6624&#39;s Software Guide 1.0 documentation" href="../../../../index.html"/>
        <link rel="up" title="Examples of Command Groups" href="../commandgroupexamples.html"/>
        <link rel="next" title="Creating a Subsystem" href="../../../subsystems/subsystems.html"/>
        <link rel="prev" title="Deflector Flip" href="deflector.html"/> 

  
  <script src="../../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> Team 6624's Software Guide
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../robotcode/robotcode.html">Robot Code</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../tasks.html">Common Tasks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../newproject.html">Creating a new project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../drivetrains/drivetrains.html">Drive Trains</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../drivercontrols.html">Switching around Driver Controls in OI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../integration.html">Integrating code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../commands.html">Creating a Command</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../commandgroups.html">Creating a Command Group</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../commandgroupexamples.html">Examples of Command Groups</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="deflector.html">Deflector Flip</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Acquire gear from the front</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../subsystems/subsystems.html">Creating a Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../autonomous/autonomous.html">Autonomous Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../camera/camera.html">Camera</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../github/github.html">GitHub</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Team 6624's Software Guide</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../tasks.html">Common Tasks</a> &raquo;</li>
        
          <li><a href="../../commandgroups.html">Creating a Command Group</a> &raquo;</li>
        
          <li><a href="../commandgroupexamples.html">Examples of Command Groups</a> &raquo;</li>
        
      <li>Acquire gear from the front</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="acquire-gear-from-the-front">
<h1>Acquire gear from the front<a class="headerlink" href="#acquire-gear-from-the-front" title="Permalink to this headline">¶</a></h1>
<p>This example discusses how one might write a command group for a fairly complex subsystem like a Gear Manipulator.</p>
<div class="section" id="design">
<h2>Design<a class="headerlink" href="#design" title="Permalink to this headline">¶</a></h2>
<p>In this example, the Gear Manipulator is composed of a claw attached to a carriage. That carriage (and the claw) then moves along a track, pulled by a belt with a motor. This track goes to the front and back of the robot. There is an encoder that can track the position of the carriage along the track.</p>
<p>The claw is actually composed of two pieces, the front claw, and the back claw, each of which can open and close separately. When the front claw is open, gears can come in from the front, and the same goes for the back. On the top and bottom of the claw, there are also intake wheels that spin and suck in gears from either side of the claw.</p>
<p>Thus, to grab a gear from the front of the robot, you move the carriage to the front, open the front claw but keep the back claw closed (otherwise the gear would go all the way through) and then start the front intake motors, sucking in the gear.</p>
<p>However, another important thing is that the track cannot move while either claw is open. So, in the beginning, before moving the carriage, you have to close both claws, and wait 0.2 seconds to make sure they&#8217;re both closed fully. Otherwise, robot may be damaged. Also, when moving the carriage, stop the intake motors to prevent wear if they drag against the ground.</p>
<p>In this example, the operator wants this whole sequence of events to be bound to the left bumper button.</p>
</div>
<div class="section" id="subsystem-methods">
<h2>Subsystem methods<a class="headerlink" href="#subsystem-methods" title="Permalink to this headline">¶</a></h2>
<p>This guide assumes that there already is a GearManiulator subsystem. Additionally, there are also already commmands written for</p>
<blockquote>
<div><ul class="simple">
<li>moving the carriage to the front (MoveCarriageFront)</li>
<li>opening and closing the front and back claws (OpenFrontClaw, OpenBackClaw, CloseFrontClaw, CloseBackClaw)</li>
<li>controlling intake wheels (StartFrontIntake, StartBackIntake, StopFrontIntake, StopBackIntake).</li>
</ul>
</div></blockquote>
<p>We also assume that OI already has a Joystick named operator, and that the Left Bumper button on the operator&#8217;s controller is button 5.</p>
<p>On how to use OI, see <a class="reference external" href="./../../../../robotcode/structure/oi.html">OI</a>.</p>
</div>
<div class="section" id="writing-the-command">
<h2>Writing the command<a class="headerlink" href="#writing-the-command" title="Permalink to this headline">¶</a></h2>
<p>Once you create the FrontAcquire command group, you&#8217;ll get a blank command group template like this:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">org.usfirst.frc.team93.robot.commands</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">edu.wpi.first.wpilibj.command.CommandGroup</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> *</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FrontAcquire</span> <span class="kd">extends</span> <span class="n">CommandGroup</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="nf">FrontAcquire</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Add Commands here:</span>
        <span class="c1">// e.g. addSequential(new Command1());</span>
        <span class="c1">//      addSequential(new Command2());</span>
        <span class="c1">// these will run in order.</span>

        <span class="c1">// To run multiple commands at the same time,</span>
        <span class="c1">// use addParallel()</span>
        <span class="c1">// e.g. addParallel(new Command1());</span>
        <span class="c1">//      addSequential(new Command2());</span>
        <span class="c1">// Command1 and Command2 will run in parallel.</span>

        <span class="c1">// A command group will require all of the subsystems that each member</span>
        <span class="c1">// would require.</span>
        <span class="c1">// e.g. if Command1 requires chassis, and Command2 requires arm,</span>
        <span class="c1">// a CommandGroup containing them would require both the chassis and the</span>
        <span class="c1">// arm.</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>In the javadoc at the top, describe what this command does.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="cm">/**</span>
<span class="cm"> * This command group moves the carriage to the front,</span>
<span class="cm"> * opens the front claw, and starts the front intake wheels.</span>
<span class="cm"> * It makes it easy for the operator to acquire a gear from the front.</span>
<span class="cm"> */</span>
</pre></div>
</div>
<p>Then, the constructor is where all of the command adding goes.</p>
<p>You can also delete the autogenerated comments in the body of the constructor if you like.</p>
<p>So, the sequence of events is to stop the intake motors, close the front and back claws, wait 0.2 seconds to make sure they fully close, then move the gear to the front, then open the claw and start the intake motors.</p>
<p>Now, your command instead looks like this:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">org.usfirst.frc.team93.robot.commands</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">edu.wpi.first.wpilibj.command.CommandGroup</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * This command group moves the carriage to the front,</span>
<span class="cm"> * opens the front claw, and starts the front intake wheels.</span>
<span class="cm"> * It makes it easy for the operator to acquire a gear from the front.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FrontAcquire</span> <span class="kd">extends</span> <span class="n">CommandGroup</span>
<span class="o">{</span>
    <span class="kd">public</span> <span class="nf">FrontAcquire</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">StopFrontIntake</span><span class="o">());</span> <span class="c1">// stop front intake wheels</span>
        <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">StopBackIntake</span><span class="o">());</span> <span class="c1">// stop back intake wheels</span>

        <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">CloseFrontClaw</span><span class="o">());</span> <span class="c1">// close back claw</span>
        <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">CloseBackClaw</span><span class="o">());</span> <span class="c1">// close front claw</span>

        <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">WaitCommand</span><span class="o">(</span><span class="mf">0.2</span><span class="o">));</span> <span class="c1">// wait for both claws to close</span>

        <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">MoveCarriageFront</span><span class="o">());</span> <span class="c1">// move carriage to front now that claws are closed</span>

        <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">OpenFrontClaw</span><span class="o">());</span> <span class="c1">// open the front claw</span>
        <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">StartFrontIntake</span><span class="o">());</span> <span class="c1">// start front intake wheels</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>That&#8217;s all there is to the command group. It&#8217;s done.</p>
</div>
<div class="section" id="running-the-command">
<h2>Running the command<a class="headerlink" href="#running-the-command" title="Permalink to this headline">¶</a></h2>
<p>Now, go into the OI class. We need to set the FrontAcquire command to run whenever the operator presses the left bumper button.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">static</span> <span class="n">Joystick</span> <span class="n">driver</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">Joystick</span> <span class="n">operator</span><span class="o">;</span>

<span class="kd">public</span> <span class="nf">OI</span><span class="o">()</span>
<span class="o">{</span>
    <span class="n">driver</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Joystick</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
    <span class="n">operator</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Joystick</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>

<span class="hll">    <span class="n">Button</span> <span class="n">frontAcquireButton</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JoystickButton</span><span class="o">(</span><span class="n">operator</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span> <span class="c1">// left bumper button</span>
</span><span class="hll">    <span class="n">frontAcquireButton</span><span class="o">.</span><span class="na">whenPressed</span><span class="o">(</span><span class="k">new</span> <span class="n">FrontAcquire</span><span class="o">());</span>
</span><span class="o">}</span>
</pre></div>
</div>
<p>And that&#8217;s it! Now, whenever the operator presses left bumper, the robot will try to acquire a gear from the front.</p>
</div>
<div class="section" id="final-code">
<h2>Final code<a class="headerlink" href="#final-code" title="Permalink to this headline">¶</a></h2>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">org.usfirst.frc.team93.robot.commands</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">edu.wpi.first.wpilibj.command.CommandGroup</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * This command group moves the carriage to the front,</span>
<span class="cm"> * opens the front claw, and starts the front intake wheels.</span>
<span class="cm"> * It makes it easy for the operator to acquire a gear from the front.</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FrontAcquire</span> <span class="kd">extends</span> <span class="n">CommandGroup</span>
<span class="o">{</span>
    <span class="kd">public</span> <span class="nf">FrontAcquire</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">StopFrontIntake</span><span class="o">());</span> <span class="c1">// stop front intake wheels</span>
        <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">StopBackIntake</span><span class="o">());</span> <span class="c1">// stop back intake wheels</span>

        <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">CloseFrontClaw</span><span class="o">());</span> <span class="c1">// close back claw</span>
        <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">CloseBackClaw</span><span class="o">());</span> <span class="c1">// close front claw</span>

        <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">WaitCommand</span><span class="o">(</span><span class="mf">0.2</span><span class="o">));</span> <span class="c1">// wait for both claws to close</span>

        <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">MoveCarriageFront</span><span class="o">());</span> <span class="c1">// move carriage to front now that claws are closed</span>

        <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">OpenFrontClaw</span><span class="o">());</span> <span class="c1">// open the front claw</span>
        <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">StartFrontIntake</span><span class="o">());</span> <span class="c1">// start front intake wheels</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="toctree-wrapper compound">
</div>
<div class="toctree-wrapper compound">
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../../subsystems/subsystems.html" class="btn btn-neutral float-right" title="Creating a Subsystem" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="deflector.html" class="btn btn-neutral" title="Deflector Flip" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>