

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Creating a Command &mdash; Team 6624&#39;s Software Guide 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Team 6624&#39;s Software Guide 1.0 documentation" href="../../index.html"/>
        <link rel="up" title="Common Tasks" href="../tasks.html"/>
        <link rel="next" title="Examples of Commands" href="examples/commandexamples.html"/>
        <link rel="prev" title="Integrating code" href="../integration.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Team 6624's Software Guide
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robotcode/robotcode.html">Robot Code</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tasks.html">Common Tasks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../newproject.html">Creating a new project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drivetrains/drivetrains.html">Drive Trains</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drivercontrols.html">Switching around Driver Controls in OI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration.html">Integrating code</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Creating a Command</a><ul>
<li class="toctree-l3"><a class="reference internal" href="examples/commandexamples.html">Examples of Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="commandgroups.html">Creating a Command Group</a></li>
<li class="toctree-l2"><a class="reference internal" href="../subsystems/subsystems.html">Creating a Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autonomous/autonomous.html">Autonomous Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../camera/camera.html">Camera</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../github/github.html">GitHub</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Team 6624's Software Guide</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../tasks.html">Common Tasks</a> &raquo;</li>
        
      <li>Creating a Command</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="creating-a-command">
<h1>Creating a Command<a class="headerlink" href="#creating-a-command" title="Permalink to this headline">¶</a></h1>
<p>This article covers how to write a command, given a task. For more details on what a command is, see <a class="reference external" href="./../../robotcode/structure/commands.html">Commands</a>.</p>
<div class="section" id="preparation">
<h2>Preparation<a class="headerlink" href="#preparation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="find-out-what-components-you-have">
<h3>1. Find out what components you have<a class="headerlink" href="#find-out-what-components-you-have" title="Permalink to this headline">¶</a></h3>
<p>Before you write a command, you need to know what you&#8217;re working with. Unless the robot is already well understood, make sure to talk to design and electrical, and find out what motors, solenoids, and sensors you have to use, and how each part should function in your command.</p>
<p>If the design isn&#8217;t ready yet, ask about the general workings of the robot, and try to squeeze out what you can. It&#8217;s possible that many parts are confirmed, but some details are not.</p>
</div>
<div class="section" id="look-at-the-subsystem">
<h3>2. Look at the subsystem<a class="headerlink" href="#look-at-the-subsystem" title="Permalink to this headline">¶</a></h3>
<p>It&#8217;s not really possible to write a command without a subsystem that gives commands the ability to perform basic subsystem actions, so we must tackle that part first. Basic actions include motor setting, solenoid setting, sensor reading, and basic functions, BUT if any safety nets need to be implemented, they should be implemented here.</p>
<p>Look at the subsystem (or subsystems) that you are using, and determine what functionality needs to be added. For example, if you&#8217;re writing a Drive command, and there aren&#8217;t any motor setting methods in the Drive subsystem, you should add those. It&#8217;s good practice to add a way to safely do any reasonable action the subsystem could have to do, but if you&#8217;re short on time, you could just add only the functionality you directly need for the command.</p>
<p>Remember that you shouldn&#8217;t be accessing the components in the subsystem directly. It is much better to write</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Drive</span><span class="o">.</span><span class="na">setLeftMotors</span><span class="o">(</span><span class="mf">0.5</span><span class="o">);</span>
</pre></div>
</div>
<p>than</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Drive</span><span class="o">.</span><span class="na">LEFT_FRONT_MOTOR</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mf">0.5</span><span class="o">);</span>
<span class="n">Drive</span><span class="o">.</span><span class="na">LEFT_BACK_MOTOR</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="mf">0.5</span><span class="o">);</span>
</pre></div>
</div>
<p>On writing a subsystem, it would be useful to visit the <a class="reference external" href="../subsystems/subsystems.html">Subsystems</a> page.</p>
</div>
<div class="section" id="make-a-plan">
<h3>3. Make a plan<a class="headerlink" href="#make-a-plan" title="Permalink to this headline">¶</a></h3>
<p>Although it&#8217;s easy to write simple commands, more complex commands may require flow charts and some whiteboard work, or just a lot of thinking. Programming should only really occur when you know how the command is going to work, and all you need is the implementation.</p>
<p>Here, you might even decide that a <cite>CommandGroup &lt;commandgroups.html&gt;</cite> is a better way to implement this action. Usually, any sequence of events, such as &#8220;Open the claw and then dispense the gear&#8221; or &#8220;Move the elevator up while driving forward&#8221; should use a command group.</p>
<p>One example of a plan might be:</p>
<blockquote>
<div><p>Goal: I want my command to be able to manually move an elevator up and down, except it will stop at the ends if a limit switch is pressed at either end as a safety net. If the joystick is pressed down, the safety net can be manually overrided.</p>
<dl class="docutils">
<dt><strong>if everything&#8217;s normal:</strong></dt>
<dd><strong>set the elevator motor power to the operator&#8217;s joystick value</strong></dd>
<dt><strong>if the top limit switch is pressed:</strong></dt>
<dd><dl class="first last docutils">
<dt><strong>if the motor is being powered in the upwards direction:</strong></dt>
<dd><strong>make the motor power 0</strong></dd>
</dl>
</dd>
<dt><strong>if the bottom limit switch is pressed:</strong></dt>
<dd><dl class="first last docutils">
<dt><strong>if the motor is being powered in the downwards direction:</strong></dt>
<dd><strong>make the motor power 0</strong></dd>
</dl>
</dd>
<dt><strong>if the joystick button is pressed:</strong></dt>
<dd><strong>set the elevator motor power to the operator&#8217;s joystick value regardless of anything else</strong></dd>
</dl>
</div></blockquote>
<p>After the plan is complete, then you&#8217;re ready to dive into actually writing the command.</p>
</div>
</div>
<div class="section" id="writing-the-command">
<h2>Writing the Command<a class="headerlink" href="#writing-the-command" title="Permalink to this headline">¶</a></h2>
<div class="section" id="make-the-command-s-file">
<h3>1. Make the command&#8217;s file<a class="headerlink" href="#make-the-command-s-file" title="Permalink to this headline">¶</a></h3>
<p>Right click on the project and choose <strong>New</strong> -&gt; <strong>Other</strong>.</p>
<a class="reference internal image-reference" href="../../_images/scrn1.png"><img alt="../../_images/scrn1.png" src="../../_images/scrn1.png" style="width: 80%;" /></a>
<p>Then, in the New window that appears, scroll down to <strong>WPILib Robot Java Development</strong> and choose <strong>Command</strong>.</p>
<a class="reference internal image-reference" href="../../_images/scrn2.png"><img alt="../../_images/scrn2.png" src="../../_images/scrn2.png" style="width: 60%;" /></a>
<a class="reference internal image-reference" href="../../_images/scrn3.png"><img alt="../../_images/scrn3.png" src="../../_images/scrn3.png" style="width: 60%;" /></a>
<p>Then, name your command.</p>
<a class="reference internal image-reference" href="../../_images/scrn4.png"><img alt="../../_images/scrn4.png" src="../../_images/scrn4.png" style="width: 70%;" /></a>
<p>Press <strong>Finish</strong>, and it should be created.</p>
<a class="reference internal image-reference" href="../../_images/scrn5.png"><img alt="../../_images/scrn5.png" src="../../_images/scrn5.png" style="width: 80%;" /></a>
</div>
<div class="section" id="write-the-command">
<h3>2. Write the command<a class="headerlink" href="#write-the-command" title="Permalink to this headline">¶</a></h3>
<p>Now, it&#8217;s time to actually write the command. Since this varies greatly from command to command, there isn&#8217;t really any one clear formula for this. If you already have a plan, however, writing the command is simply just following the plan and calling on subsystem methods. See <a class="reference external" href="./../../robotcode/structure/commands.html">Commands</a> for what to put in each method, and follow these examples for guidance:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt><a class="reference external" href="examples/commands/climber.html">Climber</a></dt>
<dd>Manual control of a motor that is programmed to never spin backwards.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference external" href="examples/commands/tankdrive.html">Tank Drive</a></dt>
<dd>A basic tank drive. Left joystick controls the left wheels, right joystick controls the right wheels.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference external" href="examples/commands/bacq.html">Ball Acquisition</a></dt>
<dd>A command that prevents balls from accidentally falling out of a claw using intake wheels.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference external" href="examples/commands/claw.html">Open and Close a Claw</a></dt>
<dd>Opening or closing a claw using pneumatics.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference external" href="examples/commands/elevatormanual.html">Moving an Elevator Manually</a></dt>
<dd>Raising and lowering an elevator subsystem, in between two limit switches marking the bottom and the top.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference external" href="examples/commands/drivesetpoint.html">Driving Forward a Certain Distance</a></dt>
<dd>Accurately driving the robot forwards to a certain distance using encoders and a PIDController.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference external" href="examples/commands/aimclaw.html">Rotating a Claw both Manually and using Setpoints</a></dt>
<dd>Two commands that interact to give an operator both manual and setpoint control of a rotating claw that can only rotate between two limits in a safe way, using a Potentiometer and a PIDController.</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>List of example commands:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="examples/commandexamples.html">Examples of Commands</a></li>
</ul>
</div>
</div>
<div class="section" id="running-the-command">
<h3>3. Running the command<a class="headerlink" href="#running-the-command" title="Permalink to this headline">¶</a></h3>
<p>Now that the command is all written, the robot has to run it. There are several different ways to run a command:</p>
<blockquote>
<div><ul>
<li><p class="first">If the command should be linked to a driver/operator button press:</p>
<blockquote>
<div><p>This way of running a command is used if the command should be under direct control of the driver/operator.</p>
<p>This is done by creating a button on a joystick:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Button</span> <span class="n">joystickA</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JoystickButton</span><span class="o">(</span><span class="n">driver</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
</pre></div>
</div>
<p>and then, linking the command to the button:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">joystickA</span><span class="o">.</span><span class="na">whenPressed</span><span class="o">(</span><span class="k">new</span> <span class="n">YourCommandNameHere</span><span class="o">());</span>
</pre></div>
</div>
<p>Then, any time the button is pressed, the command will start.</p>
</div></blockquote>
</li>
<li><p class="first">If the command is linked to a subsystem, and should always be running unless something else is using the subsystem:</p>
<blockquote>
<div><p>Running a command by making it a subsystem&#8217;s default command is used for commands that are tightly linked to their subsystems and should almost always be running, unless something more important is using the subsystem. Examples include DriveContinuous and ManualElevatorControl commands, since, for example, we usually want the driver in control of the robot by default. Remember that a subsystem can only have one default command.</p>
<p>This is done by adding to the initDefaultCommand() method in a subsystem:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">initDefaultCommand</span><span class="o">()</span>
<span class="o">{</span>
    <span class="n">setDefaultCommand</span><span class="o">(</span><span class="k">new</span> <span class="n">YourCommandNameHere</span><span class="o">());</span>
<span class="o">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">If the command should be started once at the beginning of autonomous or teleop mode and never again or it never ends or should be interrupted:</p>
<blockquote>
<div><p>Manually starting a command is very rarely useful, but sometimes useful in a pinch or for autonomous reasons, although we use CommandGroups for that anyway.</p>
<p>This is done by writing:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Command</span> <span class="n">yourCommandNameHere</span> <span class="o">=</span> <span class="k">new</span> <span class="n">YourCommandNameHere</span><span class="o">();</span>
<span class="n">yourCommandNameHere</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</pre></div>
</div>
<p>Then, when the command needs to be canceled, use:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">yourCommandNameHere</span><span class="o">.</span><span class="na">cancel</span><span class="o">();</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<p>And that&#8217;s it! All that&#8217;s left is to test the command until you&#8217;re sure it works.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="examples/commandexamples.html" class="btn btn-neutral float-right" title="Examples of Commands" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../integration.html" class="btn btn-neutral" title="Integrating code" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>