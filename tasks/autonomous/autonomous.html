

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Autonomous Code &mdash; Team 6624&#39;s Software Guide 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Team 6624&#39;s Software Guide 1.0 documentation" href="../../index.html"/>
        <link rel="up" title="Common Tasks" href="../tasks.html"/>
        <link rel="next" title="Autonomous example" href="autochooser.html"/>
        <link rel="prev" title="Gear manipulator subsystem" href="../subsystems/examples/gearmanip.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Team 6624's Software Guide
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robotcode/robotcode.html">Robot Code</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tasks.html">Common Tasks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../newproject.html">Creating a new project</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drivetrains/drivetrains.html">Drive Trains</a></li>
<li class="toctree-l2"><a class="reference internal" href="../drivercontrols.html">Switching around Driver Controls in OI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integration.html">Integrating code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/commands.html">Creating a Command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../commands/commandgroups.html">Creating a Command Group</a></li>
<li class="toctree-l2"><a class="reference internal" href="../subsystems/subsystems.html">Creating a Subsystem</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Autonomous Code</a><ul>
<li class="toctree-l3"><a class="reference internal" href="autochooser.html">Autonomous example</a></li>
<li class="toctree-l3"><a class="reference internal" href="autotesting.html">Autonomous Testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../camera/camera.html">Camera</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../github/github.html">GitHub</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Team 6624's Software Guide</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../tasks.html">Common Tasks</a> &raquo;</li>
        
      <li>Autonomous Code</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="autonomous-code">
<h1>Autonomous Code<a class="headerlink" href="#autonomous-code" title="Permalink to this headline">¶</a></h1>
<p>Every FRC match begins with a 15-second autonomous period. During this time, drivers are not allowed to touch the controls, and the robot runs off of preprogrammed instructions.</p>
<p>For most cases, autonomous code is simply just writing and running a <a class="reference external" href="./../commands/commandgroups.html">CommandGroup</a> that is specifically designed to accomplish certain autonomous tasks.</p>
<div class="section" id="find-out-what-commands-you-have">
<h2>1. Find out what commands you have<a class="headerlink" href="#find-out-what-commands-you-have" title="Permalink to this headline">¶</a></h2>
<p>Just like for any command group, before writing an autonomous plan, you need to know what commands you have to work with. For every action that needs to be performed in an autonomous plan (e.g. driving, dropping a gear, shooting a ball, etc), there also needs to be a command for that action. If you need a subsystem to do some action, but there isn&#8217;t a command for it, you may need to either <a class="reference external" href="./../commands/commands.html">write the command yourself</a> or find someone who can.</p>
<p>Take special note of the drive commands. Autonomous mode requires that the robot navigate the field accurately using only input from its sensors. This is often possible to a high degree of accuracy simply using encoders and a gyro, so look for commands that allow you to drive the robot forward some number of encoder ticks, or rotate to some angle. These will be essential.</p>
</div>
<div class="section" id="make-a-plan">
<h2>2. Make a plan<a class="headerlink" href="#make-a-plan" title="Permalink to this headline">¶</a></h2>
<p>This section assumes that you know how to use addSequential and addParallel. For more information on this, see <a class="reference external" href="./../commands/commandgroups.html#make-a-plan">Command Groups</a>.</p>
<p>First, talk to Strategy and ask what they want as an autonomous plan. They should be able to give you an idea of the tasks that need to be done in the autonomous mode. For an example of an autonomous plan, see <a class="reference external" href="autochooser.html">Example Autonomous</a>.</p>
<p>Then, examine the field. Calculate dimensions and distances, and figure out how you will command the robot to move from one position to another by using the commands you have. Note that you may need different autonomous plans for each of the 3 starting positions. The field may even be asymmetric, which means you&#8217;ll even more plans to account for those differences.</p>
<p>The way to handle this is to have many autonomous plans, and then allow the drivers to choose which one to use. See <a class="reference external" href="autochooser.html">Autonomous Chooser</a>.</p>
<p>At the end, for each starting position, you should have a clear list of commands the robot should take to accomplish its goal, with the calculations already worked out.</p>
<p>Examples (in reality, this will be written out or in your head):</p>
<blockquote>
<div><ul>
<li><p class="first">Drive Forwards plan:</p>
<blockquote>
<div><p>drive forwards a quarter of the field length.</p>
</div></blockquote>
</li>
<li><p class="first">Get to goal past obstacle</p>
<blockquote>
<div><a class="reference internal image-reference" href="../../_images/plan.png"><img alt="../../_images/plan.png" src="../../_images/plan.png" style="width: 100%;" /></a>
<ol class="arabic simple">
<li>drive the robot forward by the robot_length</li>
<li>turn to the right</li>
<li>drive forwards and clear the obstacle</li>
<li>turn to face forwards again</li>
<li>drive to the goal.</li>
</ol>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="write-the-autonomous-plan">
<h2>3. Write the Autonomous Plan<a class="headerlink" href="#write-the-autonomous-plan" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="./../commands/commandgroups.html#make-the-command-group-s-file">Creating the command group file</a> for autonomous is the same process as any other command group.</p>
<p>Now, simply follow the plan you created. As far as movement around the field goes, since every field is different, it&#8217;s usually a good idea to put each distance in terms of the field size. For example, if I want the robot to move halfway across the field, it&#8217;s smarter to put:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">final</span> <span class="kt">double</span> <span class="n">FIELD_LENGTH</span> <span class="o">=</span> <span class="mf">648.0</span><span class="o">;</span>
<span class="kd">final</span> <span class="kt">double</span> <span class="n">TICKS_PER_INCH</span> <span class="o">=</span> <span class="mf">112.5</span><span class="o">;</span>

<span class="c1">// drive forward halfway across the field</span>
<span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">DriveForward</span><span class="o">(</span><span class="n">FIELD_LENGTH</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">TICKS_PER_INCH</span><span class="o">));</span>
</pre></div>
</div>
<p>than</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">DriveForward</span><span class="o">(</span><span class="mf">36450.0</span><span class="o">));</span>
</pre></div>
</div>
<p>By putting your commands in terms of field measurements, not only is it easier to adjust to differing field sizes, it&#8217;s also more readable, since the parameter being passed into the commands are directly related to the math done in the plan that gets the robot to the correct position.</p>
<p>Again, an example is very useful here. If this doesn&#8217;t make sense, try <a class="reference external" href="autochooser.html">Example Autonomous</a>.</p>
<p>In almost all cases, you&#8217;re going to need more than one autonomous plan, so try to build in an enum and switch statement into your command group to handle that.</p>
<p>For example, an enum like this would be in the class of AutonomousCommandGroup.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">enum</span> <span class="n">AutonomousPlan</span>
<span class="o">{</span>
    <span class="n">NO_AUTONOMOUS</span><span class="o">,</span> <span class="n">DRIVE_FORWARDS</span><span class="o">,</span> <span class="n">POSITION_RED_ONE</span> <span class="c1">// ... etc.</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Then, in the constructor of the AutonomousCommandGroup, which plan the command group should follow would be passed in:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="kd">final</span> <span class="kt">double</span> <span class="n">FIELD_LENGTH</span> <span class="o">=</span> <span class="mf">648.0</span><span class="o">;</span>
<span class="kd">final</span> <span class="kt">double</span> <span class="n">TICKS_PER_INCH</span> <span class="o">=</span> <span class="mf">112.5</span><span class="o">;</span>

<span class="kd">public</span> <span class="nf">AutonomousCommandGroup</span><span class="o">(</span><span class="n">AutonomousPlan</span> <span class="n">plan</span><span class="o">)</span>
<span class="o">{</span>
    <span class="k">switch</span><span class="o">(</span><span class="n">plan</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">case</span> <span class="n">NO_AUTONOMOUS</span><span class="o">:</span>
            <span class="c1">// no autonomous</span>
            <span class="k">break</span><span class="o">;</span>

        <span class="k">case</span> <span class="n">DRIVE_FORWARDS</span><span class="o">:</span>
            <span class="c1">// drive forward halfway across the field</span>
            <span class="n">addSequential</span><span class="o">(</span><span class="k">new</span> <span class="n">DriveForward</span><span class="o">(</span><span class="n">FIELD_LENGTH</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">TICKS_PER_INCH</span><span class="o">));</span>
            <span class="k">break</span><span class="o">;</span>

        <span class="c1">// ... more plans, etc.</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>This makes implementing an autonomous chooser easy, and also makes it easy to add more autonomous plans.</p>
</div>
<div class="section" id="testing-the-autonomous-plan">
<h2>4. Testing the Autonomous Plan<a class="headerlink" href="#testing-the-autonomous-plan" title="Permalink to this headline">¶</a></h2>
<p>Testing autonomous takes the longest and is possibly the most important part of having a successful autonomous.</p>
<p>Firstly, make sure the command is running. In autonomousInit(), make sure the autonomous command is getting started. First, add the autonomousCommand to the class.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="n">Command</span> <span class="n">autonomousCommand</span><span class="o">;</span>
</pre></div>
</div>
<p>Then, what you put in autonomousInit() depends on whether you&#8217;re manually putting in the command to test in code, or using an autonomous chooser. Although an autonmous chooser will likely be in place at a real competition, it may not be in place yet when testing autonomous.</p>
<p>Choosing a command in code, manually:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">autonomousInit</span><span class="o">()</span>
<span class="o">{</span>
    <span class="n">autonomousCommand</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AutonomousCommandGroup</span><span class="o">();</span>
    <span class="n">autonomousCommand</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Using an autonomous chooser:</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">autonomousInit</span><span class="o">()</span>
<span class="o">{</span>
    <span class="n">autonomousCommand</span> <span class="o">=</span> <span class="n">chooser</span><span class="o">.</span><span class="na">getSelected</span><span class="o">();</span>
    <span class="n">autonomousCommand</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Then, make sure that once teleop starts, to cancel the autonomousCommand.</p>
<div class="highlight-java"><div class="highlight"><pre><span></span><span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">teleopInit</span><span class="o">()</span>
<span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">autonomousCommand</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="n">autonomousCommand</span><span class="o">.</span><span class="na">cancel</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>For more on how to test autonomous plans once the robot is ready to test, see <a class="reference external" href="autotesting.html">Testing Autonomous</a>.</p>
<div class="toctree-wrapper compound">
<p class="caption"><span class="caption-text">Further Reading</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="autochooser.html">Autonomous example</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="autotesting.html">Autonomous Testing</a><ul class="simple">
</ul>
</li>
</ul>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="autochooser.html" class="btn btn-neutral float-right" title="Autonomous example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../subsystems/examples/gearmanip.html" class="btn btn-neutral" title="Gear manipulator subsystem" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>